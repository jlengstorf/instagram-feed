/**
 * Recent Instagram Uploads jQuery Plugin
 *
 * A simple jQuery plugin to display recent uploads for a given user.
 *
 * Copyright (c) 2013 Jason Lengstorf
 *
 * LICENSE: Permission is hereby granted, free of charge, to any person 
 * obtaining a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including without 
 * limitation the rights to use, copy, modify, merge, publish, distribute, 
 * sublicense, and/or sell copies of the Software, and to permit persons to 
 * whom the Software is furnished to do so, subject to the following 
 * conditions:
 *
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 *
 * @author    Jason Lengstorf <jason@lengstorf.com>
 * @version   1.0.0
 * @copyright 2013 Jason Lengstorf
 * @license   MIT License (http://opensource.org/licenses/mit-license.php)
 */(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.api_url="https://api.instagram.com/v1/";this.init()}var i="recentInstagramUploads",s={access_token:null,ig_username:null,ig_user_id:null,loading_selector:".loading",photo_count:12,photo_class:"photo",callback:function(){}};o.prototype.init=function(){var e=this.options,t="getPhotos";if(e.access_token===null||e.ig_username===null&&e.ig_user_id===null)return;e.ig_user_id===null?e.ig_user_id=this.getUserId(e.ig_username,t):this.getPhotos()};o.prototype.getUserId=function(t,n){var r=this.options,i=this,s=this.api_url+"users/search?q="+t+"&access_token="+r.access_token;e.ajax({type:"GET",dataType:"jsonp",url:s,success:function(e){if(typeof e.data!="undefined"&&e.data.length>0){r.ig_user_id=e.data[0].id;i[n]()}}})};o.prototype.getPhotos=function(){var t=this.options,n=e(this.element),r=this.api_url+"users/"+t.ig_user_id+"/media/recent?access_token="+t.access_token;e.ajax({type:"GET",dataType:"jsonp",url:r,success:function(r){var i=typeof r.data!="undefined"?r.data.length:0,s=n;if(i>0){s.find(t.loading_selector).remove();for(var o=0;o<i;o++){if(o===t.photo_count)break;var u=r.data[o];e("<a>").attr({href:u.images.standard_resolution.url,"class":t.photo_class,title:u.caption.text+' <a href="'+u.link+'" '+'target="_blank">[view on Instagram]</a>'}).html(e("<img />").attr({src:u.images.thumbnail.url})).appendTo(s).wrap("<li></li>");t.callback()}}}})};e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new o(this,t))})}})(jQuery,window,document);
